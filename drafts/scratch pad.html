<!DOCTYPE html>
<html>
  <body style="margin: 0; background: #222">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js"></script>
    <script>
      // Create the Pixi app
      const app = new PIXI.Application({
        resizeTo: window,
        background: "#000000",
      });
      document.body.appendChild(app.view);

      // Create the HTML video element
      const video = document.createElement("video");
      video.src =
        "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/Sintel.mp4";
      video.autoplay = true;
      video.loop = true;
      video.muted = true;
      video.playsInline = true;
      video.crossOrigin = "anonymous";
      video.addEventListener("canplay", () => {
        video.play().catch(() => {});
      });

      // Convert video to texture
      const texture = PIXI.Texture.from(video);

      // Create sprite
      const sprite = new PIXI.Sprite(texture);
      sprite.anchor.set(0.5);
      sprite.x = app.renderer.width / 2;
      sprite.y = app.renderer.height / 2;
      app.stage.addChild(sprite);

      // Scale when metadata arrives or window resizes
      function resize() {
        if (!video.videoWidth) return;

        const scale = Math.max(
          app.renderer.width / video.videoWidth,
          app.renderer.height / video.videoHeight
        );

        sprite.scale.set(scale);
        sprite.x = app.renderer.width / 2;
        sprite.y = app.renderer.height / 2;
      }
      app.ticker.add(() => {
        texture.update(); // forces GL upload of the current video frame
      });
      video.preload = "auto";
      video.setAttribute("playsinline", "");
      video.setAttribute("webkit-playsinline", "");

      video.addEventListener("loadedmetadata", resize);
      window.addEventListener("resize", resize);
    </script>
  </body>
</html>
