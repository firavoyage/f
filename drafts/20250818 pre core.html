<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Presentation App</title>
    <!-- Prism CSS for syntax highlighting -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.css" rel="stylesheet" />
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .slide {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 40px;
            page-break-after: always;
        }
        .slide h1 {
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .slide h2 {
            color: #444;
        }
        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            background: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
        }
        pre {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        blockquote {
            border-left: 4px solid #ddd;
            padding-left: 15px;
            color: #666;
            margin-left: 0;
        }
    </style>
    <!-- MathJax Configuration -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
</head>
<body>
    <h1>Markdown Presentation</h1>
    <div id="presentation-container"></div>

    <!-- CDN Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script>
        function createPresentation(markdownContent) {
            // Configure marked with Prism for code highlighting
            marked.setOptions({
                highlight: function(code, lang) {
                    if (Prism.languages[lang]) {
                        return Prism.highlight(code, Prism.languages[lang], lang);
                    }
                    return code;
                },
                breaks: true,
                gfm: true
            });

            // Split the markdown content into slides
            const slideSeparators = /(?:^|\n)(#+ .+|\n-{3,}\n)(?:\n|$)/g;
            const parts = markdownContent.split(slideSeparators);
            
            // Process the parts into slides
            const slides = [];
            let currentSlideContent = '';
            
            for (let i = 0; i < parts.length; i++) {
                const part = parts[i].trim();
                
                if (!part) continue;
                
                // Check if this part is a header or horizontal rule
                if (part.match(/^#+ /) || part.match(/^-{3,}$/)) {
                    // If we have content, add it as a slide before starting new one
                    if (currentSlideContent) {
                        slides.push(marked.parse(currentSlideContent));
                        currentSlideContent = '';
                    }
                    
                    // Add header to new slide (but skip horizontal rules)
                    if (!part.match(/^-{3,}$/)) {
                        currentSlideContent += part + '\n\n';
                    }
                } else {
                    currentSlideContent += part + '\n\n';
                }
            }
            
            // Add the last slide if there's content
            if (currentSlideContent) {
                slides.push(marked.parse(currentSlideContent));
            }
            
            return slides;
        }

        // Sample markdown content for testing
        const sampleMarkdown = `# Introduction to Markdown Presentations

Welcome to this demo presentation! This slide was created from a H1 header.

---

## Slide Features

This slide was created from a H2 header. The presentation supports:

- **Markdown formatting** like *italics* and **bold**
- Code blocks with syntax highlighting:
\`\`\`javascript
function hello() {
    console.log("Hello, world!");
    return 42;
}
\`\`\`

- Math expressions with MathJax: $E = mc^2$

---

### Advanced Features

> Blockquotes are supported too!

Tables work as well:

| Feature       | Support         |
|--------------|----------------|
| Headers      | Yes            |
| Lists        | Yes            |
| Code         | Yes            |

---

# Math Slide

Here's some more complex math:

$$
\\int_0^\\infty e^{-x^2} dx = \\frac{\\sqrt{\\pi}}{2}
$$

And inline math: $\\frac{d}{dx}f(x) = \\lim_{h \\to 0} \\frac{f(x+h)-f(x)}{h}$

---

# Final Slide

Thank you for viewing this presentation!

Created with:
- Markdown
- JavaScript
- ❤️
`;

        // Render the presentation
        const slides = createPresentation(sampleMarkdown);
        const container = document.getElementById('presentation-container');
        
        slides.forEach(slideHtml => {
            const slideDiv = document.createElement('div');
            slideDiv.className = 'slide';
            slideDiv.innerHTML = slideHtml;
            container.appendChild(slideDiv);
            
            // Tell MathJax to typeset the new content
            if (window.MathJax) {
                MathJax.typesetPromise([slideDiv]).catch(err => console.log('MathJax typeset error:', err));
            }
        });
    </script>
</body>
</html>