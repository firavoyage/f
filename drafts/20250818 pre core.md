write the core function for a single page web app. it's a markdown based presentation app.

- the only param is a string of markdown. the output should be an array of html. each item is a page.
- the markdown file should be splitted by headers and horizontal rules. whenever you read one of them, start a new page. horizontal rules should not appear in the output.
- import opensource libraries to convert markdown to html.
  - use markdown-it for markdown to html
  - use prism for code rendering
  - use mathjax for math expressions
  - give me the cdn links, they will be loaded before this script
- the slides should be already processed with prism and mathjax
  - the array of slides can be copied elsewhere without these libraries
- do not use web worker

tell me if you have any suggestions!

fix:

- horizontal rules (e.g. three minus sign) doesnt split the pages
- task lists are not processed
- emoji shortcodes are not processed
- inline math is not processed
- code blocks are not processed. this time i ve removed the autoloader and added all components/prism-lang before your script.
- make the fn simple. dont use async. rename the function to convert.
- dont use innerhtml to render html with mathjax, which may cause network side effect.
- dont use markdown-it extension. just use mathjax.
- the output should be already processed with mathjax.
